<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="includeHTML.js" type="text/js"">
    <title>ì—¬ì„¯ ë²ˆì§¸</title>
    <style>
      @import url("style.css");
      @import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap");
      @import url("includeHTML.js");
    </style>
  </head>
  <header>
    <header>
        <span class="previous"><a href="5.html">ğŸ’•</a></span>
        <span class="title">Java To Solidity</span>
        <span class="next"><a href="start.html">ğŸ’•</a></span>
    </header>
  </header>
  <body>
    <div class="container">
      <div class="item">
        <h1>ê°œë…ì„¤ëª…</h1>
        <div class="box">
          <div class="text"><details>
            <summary>pragma solidity + ^ë²„ì „ì •ë³´</summary>
            <p>Pragmaë¥¼ í†µí•´ ì†”ë¦¬ë””í‹° ì»´íŒŒì¼ëŸ¬ ë²„ì „ì„ ì œí•œí•©ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>Contract</summary>
            <p>Contractë¥¼ í†µí•´ ì´ ì½”ë“œê°€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì†”ë¦¬ë””í‹°ì˜ ì»¨íŠ¸ë™íŠ¸ëŠ” ìë°”ì˜ í´ë˜ìŠ¤ë¡œ ë‚˜íƒ€ëƒˆìŠµë‹ˆë‹¤.<br>ì»¨íŠ¸ë™íŠ¸ëŠ” ìƒì†ê³¼ ë‹¤í˜•ì„±ì„ ì§€ì›í•˜ë¯€ë¡œ ë‹¤ë¥¸ ì»¨íŠ¸ë™íŠ¸ë¡œë¶€í„° ìƒì†ë˜ê±°ë‚˜ í•œ ì†”ë¦¬ë””í‹° íŒŒì¼ì— ì—¬ëŸ¬ ê°œì˜ ì»¨íŠ¸ë™íŠ¸ê°€ ì •ì˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>Struct</summary>
            <p>í•„ìš”í•œ ìë£Œí˜•ë“¤ì„ ê°€ì§€ê³  ìƒˆë¡­ê²Œ ì •ì˜í•˜ëŠ” ì‚¬ìš©ì ì •ì˜ íƒ€ì…ìœ¼ë¡œ ì†”ë¦¬ë””í‹°ì˜ êµ¬ì¡°ì²´ì…ë‹ˆë‹¤.<br>í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ êµ¬ì¡°ì²´ë¥¼ ëª…ì‹œí•˜ë©´ storageì— ì €ì¥ë˜ê³  í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ êµ¬ì¡°ì²´ë¥¼ ëª…ì‹œí•˜ë©´ memoryì— ì €ì¥ë©ë‹ˆë‹¤.<br>(ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´ storageëŠ” ì˜êµ¬ ì €ì¥, memoryëŠ” ì„ì‹œ ì €ì¥ì…ë‹ˆë‹¤. ìì„¸í•œ ê±´ ë°‘ì— ë”°ë¡œ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤.)</p>
        </details>
        <details>
            <summary>ê°’ íƒ€ì…</summary>
            <p>bool : ë…¼ë¦¬ìë£Œí˜• true/false.<br>
                int : ì •ìˆ˜í˜•<br>
                uint : ë¶€í˜¸ê°€ ì—†ëŠ” ì •ìˆ˜í˜• unsigned int. ì†”ë¦¬ë””í‹°ëŠ” ì£¼ë¡œ uint ì‚¬ìš©<br>
                address : í¬ê¸°ê°€ 20bytesì¸ ì´ë”ë¦¬ì›€ ì£¼ì†Œ ê°’ (0xbFv15646A0â€¦)<br>
                bytes : ë°”ì´íŠ¸. ë¬¸ìì—´ì €ì¥<br>
                enum : ì—´ê±°í˜•<br>
                Javaì™€ SolidityëŠ”  ê°’ íƒ€ì…ì„ ì ëŠ” ìˆœì„œì— ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆë‹¤.<br> 
                Java> public int a;<br>
                Solidity> uint public a;
            </p>
        </details>
        <details>
            <summary>ë§¤í•‘(mapping)</summary>
            <p>- êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•.<br>
                - Key&Valueë¥¼ ìŒìœ¼ë¡œ ì €ì¥<br>
                - mapping (Key(=address)=>Value(=uint))ì™€ ê°™ì€ í˜•íƒœë¡œ ì‚¬ìš©<br>
                Java> public HashMap&lt;address, Voter&gt;voters = new HashMap&lt;address, Voter&gt;;<br>
                Solidity> mapping(address => Voter) public voters;
            </p>
        </details>
        <details>
            <summary>ë°°ì—´</summary>
            <p>ê°™ì€ íƒ€ì…ì˜ ë³€ìˆ˜ë“¤ì„ ë¬¶ì€ ìë£Œêµ¬ì¡°</p>
        </details>
        <details>
            <summary>ìƒì„±ì(Constructor)</summary>
            <p>-ê°ì²´ì˜ ì´ˆê¸°í™”ê°€ í•„ìš”í•˜ë‹¤ë©´ ìƒì„±ì ì•ˆì— ì‘ì„±<br>
                -ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¨ 1ê°œë§Œ ì‘ì„±í•´ì•¼ í•œë‹¤. 2ê°œ ì´ìƒ ì‚¬ìš©ì‹œ ì˜¤ë¥˜ ë°œìƒ<br>
                -ìƒì„±ìë¥¼ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ìƒì„±ì(default constructor) ìë™ ìƒì„±<br>
                -ìƒì„±ìì˜ ê°€ì‹œì„±ì€ internal ë˜ëŠ” public<br>
                >ìƒì„±ìëŠ” íŠ¹ë³„í•œ í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ìë°” ì½”ë“œì—ì„  í•¨ìˆ˜ë¡œ ë‚˜íƒ€ë‚´ì—ˆë‹¤. Solidity ì½”ë“œë¡œ ì‘ì„±í•  ë•ŒëŠ” í•¨ìˆ˜ê°€ ì•„ë‹Œ constructorë¡œ ë°”ê¾¸ì–´ ì‘ì„±í•˜ì„¸ìš”.<br>
            </p>
        </details>
        <details>
            <summary>ë°ì´í„° ìœ„ì¹˜</summary>
            <p>memory<br>
                ì„ì‹œì ìœ¼ë¡œ ì €ì¥ë˜ëŠ” ë³€ìˆ˜ë¥¼ ë§í•©ë‹ˆë‹¤. ì´ëŠ” contract í•¨ìˆ˜ì— ëŒ€í•œ ì™¸ë¶€ í˜¸ì¶œë“¤ì´ ì¼ì–´ë‚˜ëŠ” ì‚¬ì´ì— ì§€ì›Œì§‘ë‹ˆë‹¤. ë§¤ê°œë³€ìˆ˜ì™€ ë¦¬í„´ê°’ì€ memoryë¡œ ì„ ì–¸í•©ë‹ˆë‹¤.<br><br>
                storage<br>
                ë¸”ë¡ì²´ì¸ì— ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥ë˜ëŠ” ë³€ìˆ˜ë¥¼ ë§í•©ë‹ˆë‹¤. ì €ì¥ë˜ëŠ” ë³€ìˆ˜ì˜ ì¢…ë¥˜ëŠ” ìƒíƒœ ë³€ìˆ˜, í•¨ìˆ˜ ë‚´ ë¡œì»¬ ë³€ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.
            </p>
        </details>
        <details>
            <summary>msg.sender</summary>
            <p>í˜„ì¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì‚¬ëŒ (í˜¹ì€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸)ì˜ ì£¼ì†Œì´ë©° ëª¨ë“  í•¨ìˆ˜ì—ì„œ ì´ìš© ê°€ëŠ¥í•œ ì „ì—­ ë³€ìˆ˜ì…ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>ë©”ì„¸ì§€ í”„ë¡œí¼í‹°(Message Properties)</summary>
            <p>ê³„ì•½ì€ msg í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•´ ê³„ì•½ì„ í˜¸ì¶œí•œ ì‚¬ëŒì´ ë³´ë‚¸ ë©”ì„¸ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. msg í”„ë¡œí¼í‹°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¥¼ ë‹´ìŠµë‹ˆë‹¤.<br>
                <table>
                    <tr>
                        <th>ì •ë³´</th>
                        <th>íƒ€ì…</th>
                        <th>ì„¤ëª…</th>
                    </tr>
                    <tr>
                        <td>data</td>
                        <td>byte</td>
                        <td>í˜¸ì¶œ ë°ì´í„°</td>
                    </tr>
                    <tr>
                        <td>sender</td>
                        <td>address</td>
                        <td>ê³„ì•½ì„ í˜¸ì¶œí•œ ì´ë”ë¦¬ì›€ ì£¼ì†Œ</td>
                    </tr>
                    <tr>
                        <td>value</td>
                        <td>uint</td>
                        <td>ê³„ì•½ ì£¼ì†Œë¡œ ë³´ë‚¸ EtherëŸ‰</td>
                    </tr>
                    <tr>
                        <td>gas</td>
                        <td>uint</td>
                        <td>gas limitì—ì„œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ë‚¨ì€ ê°€ìŠ¤</td>
                    </tr>
                </table>
                </p>
        </details>
        <details>
            <summary>Push</summary>
            <p>SolidityëŠ” pushë¥¼ ì´ìš©í•˜ì—¬ ë°°ì—´ì— ê°’ì„ ì…ë ¥ í•œë‹¤.<br>
                Java code><br> 
                proposals.name=proposalNames[i];<br>
                &nbsp;&nbsp;&nbsp;&nbsp;proposals.voteCount=0;<br>
                Solidity code><br>
                proposals.push(Proposal({<br>
                &nbsp;&nbsp;&nbsp;&nbsp;name: proposalNames[i],<br>
                &nbsp;&nbsp;&nbsp;&nbsp;voteCount: 0<br>
                })
                </p>
        </details>
        <details>
            <summary>ì ‘ê·¼ì œì–´ì(ê°€ì‹œì„±)</summary>
            <p>-external : ì™¸ë¶€ì»¨íŠ¸ë™íŠ¸ë§Œ ì ‘ê·¼ê°€ëŠ¥(ê°™ì€ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜¸ì¶œë˜ë©´ ì•ˆë¨), ìƒíƒœë³€ìˆ˜ëŠ” external ë¶ˆê°€ëŠ¥<br><br>
                -internal : ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€í˜¸ì¶œê°€ëŠ¥, ìƒì†ë°›ì€ ì»¨íŠ¸ë™íŠ¸ë„ í˜¸ì¶œê°€ëŠ¥, ìƒíƒœë³€ìˆ˜ëŠ” ë””í´íŠ¸ë¡œ internal ì„ ì–¸<br><br>
                -public : ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€í˜¸ì¶œ ê°€ëŠ¥, ìƒì†ë°›ì€ ì»¨íŠ¸ë™íŠ¸ë„ í˜¸ì¶œê°€ëŠ¥, ì™¸ë¶€ì»¨íŠ¸ë™íŠ¸ë„ í˜¸ì¶œê°€ëŠ¥<br><br>
                -private: ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€ë§Œ í˜¸ì¶œê°€ëŠ¥
                </p>
        </details>
        <details>
            <summary>í•¨ìˆ˜(function)</summary>
            <p>ê¸°ë³¸ì ìœ¼ë¡œ í•¨ìˆ˜ëŠ” public.<br>
                í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤. ìë°” í•¨ìˆ˜ì™€ëŠ” ìˆœì„œê°€ ì•½ê°„ ë‹¤ë¥´ë‹¤.<br>
                ì†”ë¦¬ë””í‹° ì½”ë“œ ex><br>
                fuction nameA(address a) public view returns(uint b) {<br>
                // í•¨ìˆ˜ ë‚´ìš©<br>
                }
                </p>
        </details>
        <details>
            <summary>returns</summary>
            <p>ì†”ë¦¬ë””í‹°ëŠ” ë°˜í™˜ê°’ì˜ íƒ€ì…ì„ ì§€ì •í•´ì¤˜ì•¼í•˜ë©° ë‹¤ì¤‘ ë°˜í™˜ê°’ ì²˜ë¦¬ëŠ” ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬ ëœë‹¤.</p>
        </details>
        <details>
            <summary>í•¨ìˆ˜ì œì–´ì(function modifier)</summary>
            <p>-View : ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ë§Œ ìˆìŠµë‹ˆë‹¤. ìƒíƒœ ë³€í™”ê°€ ì—†ëŠ” í•¨ìˆ˜ì—ëŠ” viewë¥¼ ë¶™ì…ë‹ˆë‹¤. ì¦‰, í•¨ìˆ˜ëŠ” ë°ì´í„°ë¥¼ ë³´ê¸°ë§Œí•˜ê³  ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.<br><br>
                -pure : ì–´ë–¤ ë°ì´í„°ë„ ì ‘ê·¼í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í•¨ìˆ˜ì— ì „ë‹¬ëœ ì¸ìê°’ì— ë”°ë¼ì„œ ë°˜í™˜ê°’ì´ ì •í•´ì§‘ë‹ˆë‹¤.
                </p>
        </details>
        <details>
            <summary>require</summary>
            <p>í•¨ìˆ˜ ì‹¤í–‰ ì „ì— ì°¸ì´ì–´ì•¼ í•˜ëŠ” íŠ¹ì • ì¡°ê±´ì„ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©í•©ë‹ˆë‹¤. íŠ¹ì • ì¡°ê±´ì´ ì°¸ì´ ì•„ë‹ ë•Œ í•¨ìˆ˜ê°€ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°œìƒí•˜ê³  ì‹¤í–‰ì„ ë©ˆì¶”ê²Œ ë©ë‹ˆë‹¤.<br>
                ìë°” ì½”ë“œ><br>
                if (msg.sender != chairperson) { <br>
                &nbsp;&nbsp;&nbsp;&nbsp;System.out.println("Only chairperson can give right to vote.");<br>
                &nbsp;&nbsp;&nbsp;&nbsp;System.exit(0); // ì‹¤í–‰ ë©ˆì¶”ëŠ” ì½”ë“œ<br>
                }<br>
                ì†”ë¦¬ë””í‹° ì½”ë“œ><br>
                require(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;msg.sender == chairperson,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"Only chairperson can give right to vote."<br>
                );
                </p>
        </details>
        <details>
            <summary>event</summary>
            <p>eventëŠ” Dappì˜ ë°ì´í„° ì¶œë ¥ ìˆ˜ë‹¨(Log)ì…ë‹ˆë‹¤. ì´ë²¤íŠ¸ë¥¼ ì„ ì–¸ í›„ ì´ ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•˜ë©´ ë§¤ê°œë³€ìˆ˜ê°’ê³¼ í•¨ê»˜ í˜¸ì¶œí•œ ê¸°ë¡ì´ Transaction Receipt ë¼ ë¶ˆë¦¬ëŠ” íŠ¸ëœì­ì…˜ ê²°ê³¼ì— ì €ì¥ë©ë‹ˆë‹¤.<br>
                (DAppì´ë€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ êµ¬í˜„í•œ ë¸”ë¡ì²´ì¸ì˜ íƒˆì¤‘ì•™í™” ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜)
                </p>
        </details>
        <details>
            <summary>_</summary>
            <p>í•¨ìˆ˜ ì¸ìëª… ì• ë˜ëŠ” private ì œí•œìê°€ ë¶™ì€ í•¨ìˆ˜ëª… ì•ì— _ë¥¼ ë¶™ì—¬ì•¼í•©ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>transfer</summary>
            <p>ê³„ì•½ì´ ë‹¤ë¥¸ ì´ì—ê²Œ Etherë¥¼ ì „ì†¡í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>send</summary>
            <p>sendëŠ” addressì˜ ë©¤ë²„ë³€ìˆ˜ë¡œ í•´ë‹¹ ì£¼ì†Œì—ê²Œë¡œ ì†¡ê¸ˆí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>í•¨ìˆ˜ì œì–´ì(modifier)</summary>
            <p>í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ìš”êµ¬ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ëŠ”ì§€ í™•ì¸í•˜ëŠ” ì‘ì—…ì„ í•´ì¤ë‹ˆë‹¤.<br>
                ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ìœ ì‚¬ í•¨ìˆ˜ì…ë‹ˆë‹¤. ë³´í†µ í•¨ìˆ˜ ì‹¤í–‰ ì „ì— ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
                í•¨ìˆ˜ ì¸ìëª… ì• ë˜ëŠ” private ì œí•œìê°€ ë¶™ì€ í•¨ìˆ˜ëª… ì•ì— _ë¥¼ ë¶™ì—¬ì•¼í•©ë‹ˆë‹¤.<br>
                ì„ ì–¸ê³¼ ì‚¬ìš©ì€ í•¨ìˆ˜ ì œì–´ì ë§ˆì§€ë§‰ì— _;ë¥¼ ë¶™ì—¬ ë‚˜ë¨¸ì§€ ë‚´ìš©ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.<br>
                </p>
        </details>
        <details>
            <summary>payable</summary>
            <p>payable í‚¤ì›Œë“œëŠ” ê³„ì•½ ê³„ì •ì— ì™¸ë¶€ì—ì„œ ì´ë”ë¥¼ ì†¡ê¸ˆ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì¦‰, ê³„ì•½ì´ Aì—ê²Œ ì†¡ê¸ˆì„ ë°›ìœ¼ë ¤ë©´ Aê°€ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ì— payable í‚¤ì›Œë“œê°€ ìˆì–´ì•¼í•©ë‹ˆë‹¤.<br>
                payable í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
                function í•¨ìˆ˜ì´ë¦„() payable public { <br>
                //í•¨ìˆ˜ ë‚´ìš©<br>
                }
                </p>
        </details>
        <details>
            <summary>enum</summary>
            <p>Enumì€ ì—´ê±°í˜•ìœ¼ë¡œ ì‚¬ìš©ì ì •ì˜ íƒ€ì…ì„ ë§Œë“œëŠ” í•œ ê°€ì§€ ë°©ë²•ì…ë‹ˆë‹¤. <br>
                - ì—´ê±°í˜•(indexë¥¼ ë¶€ì—¬í•œ ìë£Œí˜•)<br>
                - ê°’ì„ ì •ìˆ˜íƒ€ì…ìœ¼ë¡œ ë¦¬í„´
                </p>
        </details>
        <details>
            <summary>emit</summary>
            <p>emitì´ë€ í‚¤ì›Œë“œë¥¼ ì´ìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤</p>
        </details>
        <details>
            <summary>selfdestruct</summary>
            <p>ë°›ëŠ” ì‚¬ëŒ ì£¼ì†Œë¥¼ ëœ»í•˜ë©° í˜„ì¬ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‚­ì œí•˜ê³  ê³„ì •ì˜ ë‚˜ë¨¸ì§€ ì´ë”ë¥¼ ë°›ëŠ” ì‚¬ëŒ ì£¼ì†Œë¡œ ë³´ëƒ…ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>ì–´ì…ˆë¸”ë¦¬(assembly)</summary>
            <p>low levelì—ì„œ EVMì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>
        </details>
        </div>
          
        </div>
      </div>
      <div class="item">
        <h1>ê²°ì œ ì±„ë„ ë‹«ê¸°</h1>
        <div class="box">
          <div class="text" include-html="04.html">
           <pre>
Bobì´ ìê¸ˆì„ë°›ì„ ì¤€ë¹„ê°€ë˜ë©´ closeìŠ¤ë§ˆíŠ¸ ê³„ì•½ ì—ì„œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ê²°ì œ ì±„ë„ì„ ë‹«ì„ ì‹œê°„ ì…ë‹ˆë‹¤. ì±„ë„ì„ ë‹«ìœ¼ë©´ ìˆ˜ì‹ ìì—ê²Œ ë¹šì§„ ì´ë”ë¥¼ ì§€ë¶ˆí•˜ê³  ê³„ì•½ì„ íŒŒê¸°í•˜ì—¬ ë‚¨ì€ ì´ë”ë¥¼ Aliceì—ê²Œ ë‹¤ì‹œ ë³´ëƒ…ë‹ˆë‹¤. ì±„ë„ì„ ë‹«ìœ¼ë ¤ë©´ Bobì€ Aliceê°€ ì„œëª… í•œ ë©”ì‹œì§€ë¥¼ ì œê³µí•´ì•¼í•©ë‹ˆë‹¤.
ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì€ ë©”ì‹œì§€ì— ë³´ë‚¸ ì‚¬ëŒì˜ ìœ íš¨í•œ ì„œëª…ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì•¼í•©ë‹ˆë‹¤. ì´ í™•ì¸ì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ìˆ˜ì‹ ìê°€ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì™€ ë™ì¼í•©ë‹ˆë‹¤.
ê²°ì œ ì±„ë„ ìˆ˜ì‹ ì ë§Œ closeí•¨ìˆ˜ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆìœ¼ë©° , í•´ë‹¹ ë©”ì‹œì§€ëŠ” ê°€ì¥ ë†’ì€ ì´ ë¹šì„ ì „ë‹¬í•˜ë¯€ë¡œ ê°€ì¥ ìµœê·¼ì˜ ê²°ì œ ë©”ì‹œì§€ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤. ë°œì‹ ìê°€ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ í•  ìˆ˜ìˆëŠ” ê²½ìš° ë” ì ì€ ê¸ˆì•¡ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ê³  ë¹šì§„ ê¸ˆì•¡ì—ì„œ ìˆ˜ì‹ ìë¥¼ ì†ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ í•¨ìˆ˜ëŠ” ì„œëª… ëœ ë©”ì‹œì§€ê°€ ì£¼ì–´ì§„ ë§¤ê°œ ë³€ìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ëª¨ë“  ê²ƒì´ í™•ì¸ë˜ë©´ ìˆ˜ì‹ ìëŠ” Etherì˜ ì¼ë¶€ë¥¼ ë³´ë‚´ê³  ë°œì‹ ìëŠ” selfdestruct. closeì „ì²´ ê³„ì•½ì—ì„œ ê¸°ëŠ¥ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤ .            
            
public class SimplePaymentChannel {

    public static void main(String[] args) {
       
        public address payable sender;     
        public address payable recipient; 
        public uint256 expiration;
 
        public SimplePaymentChannel (address payable _recipient, uint256 duration) payable {
            sender = msg.sender;
            recipient = _recipient;
            expiration = block.timestamp + duration;
        }
        
        public void close(uint256 amount, bytes memory signature) {
            if (msg.sender != recipient) System.exit(0); 
            if (!isValidSignature(amount, signature)) System.exit(0); 
 
            recipient.transfer(amount);
            selfdestruct(sender);
        }
 
        public void extend(uint256 newExpiration) {
            if (msg.sender != sender) System.exit(0); 
            if (newExpiration &lt;= expiration) System.exit(0); 
 
            expiration = newExpiration;
        }
 
        public void claimTimeout() {
            if (block.timestamp &lt; expiration) System.exit(0);
            selfdestruct(sender);
        }
 
        internal bool isValidSignature(uint256 amount, bytes memory signature) view {
           
            bytes32 message = prefixed(keccak256(abi.encodePacked(this, amount)));
 
            return recoverSigner(message, signature) == sender;
        }
 
        internal splitSignature(bytes memory sig) pure returns (uint8 v, bytes32 r, bytes32 s) {
            if (sig.length != 65) System.exit(0); 
 
            assembly {
                r := mload(add(sig, 32))
                s := mload(add(sig, 64))
                v := byte(0, mload(add(sig, 96)))
            }
 
            return (v, r, s);
        }
 
        internal address recoverSigner(bytes32 message, bytes memory sig) pure {
            (uint8 v, bytes32 r, bytes32 s) = splitSignature(sig);
            return ecrecover(message, v, r, s);
        }
 
        internal bytes32 prefixed(bytes32 hash) pure {
            return keccak256(abi.encodePacked("\x19Ethereum Signed Message:\n32", hash));
        }
    }
 
 }
           </pre>
           </div>
        </div>
      </div>
      <div class="item">
        <h1>ì…ë ¥ì°½</h1>
        <div class="box">
          <div class="text">
            
                <pre>
                    
// SPDX-License-Identifier: GPL-3.0
pragma solidity ^0.7.0;

contract SimplePaymentChannel {
    address payable public sender;      // The account sending payments.
    address payable public recipient;   // The account receiving the payments.
    uint256 public expiration;  // Timeout in case the recipient never closes.

    constructor (address payable _recipient, uint256 duration)
        payable
    {
        sender = msg.sender;
        recipient = _recipient;
        expiration = block.timestamp + duration;
    }

    /// the recipient can close the channel at any time by presenting a
    /// signed amount from the sender. the recipient will be sent that amount,
    /// and the remainder will go back to the sender
    function close(uint256 amount, bytes memory signature) public {
    </pre>
    <form action="" id="my_form_8">
    <textarea id="code5" name="code" placeholder="ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
              <input type="submit" value="ì œì¶œí•˜ê¸°" id="_submit5" /><br />
            </form>
        <!--
        require(msg.sender == recipient);
        require(isValidSignature(amount, signature));

        recipient.transfer(amount);
        selfdestruct(sender);
        -->
    <pre>
    }

    /// the sender can extend the expiration at any time
    function extend(uint256 newExpiration) public {
        require(msg.sender == sender);
        require(newExpiration > expiration);

        expiration = newExpiration;
    }

    /// if the timeout is reached without the recipient closing the channel,
    /// then the Ether is released back to the sender.
    function claimTimeout() public {
    </pre>
    <form action="" id="my_form_9">
    <textarea id="code6" name="code" placeholder="ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
              <input type="submit" value="ì œì¶œí•˜ê¸°" id="_submit6" /><br />
            </form>
    <!--
        require(block.timestamp >= expiration);
        selfdestruct(sender);
    -->
    <pre>
    }

    function isValidSignature(uint256 amount, bytes memory signature)
        internal
        view
        returns (bool)
    {
        bytes32 message = prefixed(keccak256(abi.encodePacked(this, amount)));

        // check that the signature is from the payment sender
        return recoverSigner(message, signature) == sender;
    }

    /// All functions below this are just taken from the chapter
    /// 'creating and verifying signatures' chapter.

    function splitSignature(bytes memory sig)
        internal
        pure
        returns (uint8 v, bytes32 r, bytes32 s)
    {
        require(sig.length == 65);

        assembly {
            // first 32 bytes, after the length prefix
            r := mload(add(sig, 32))
            // second 32 bytes
            s := mload(add(sig, 64))
            // final byte (first byte of the next 32 bytes)
            v := byte(0, mload(add(sig, 96)))
        }

        return (v, r, s);
    }

    function recoverSigner(bytes32 message, bytes memory sig)
        internal
        pure
        returns (address)
    {
    </pre>
    <!--
        (uint8 v, bytes32 r, bytes32 s) = splitSignature(sig);
    -->
    <form action="" id="my_form_10">
    <textarea id="code7" name="code" placeholder="ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
    <input type="submit" value="ì œì¶œí•˜ê¸°" id="_submit7" /><br />
</form>
    <pre>
        return ecrecover(message, v, r, s);
    }

    /// builds a prefixed hash to                                        mimic the behavior of eth_sign.
    function prefixed(bytes32 hash) internal pure returns (bytes32) {
        return keccak256(abi.encodePacked("\x19Ethereum Signed Message:\n32", hash));
    }
}
                </pre>
          </div>
        </div>
      </div>
    </div>
    <script src="./answer.js"></script>
  </body>
</html>
