<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="includeHTML.js" type="text/js"">
    <title>ë‹¤ì„¯ ë²ˆì§¸</title>
    <style>
      @import url("style.css");
      @import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap");
      @import url("includeHTML.js");
    </style>
  </head>
  <header>
    <header>
        <span class="previous"><a href="4.html">ğŸ’•</a></span>
        <span class="title">Java To Solidity</span>
        <span class="next"><a href="6.html">ğŸ’•</a></span>
    </header>
  </header>
  <body>
    <div class="container">
      <div class="item">
        <h1>ê°œë…ì„¤ëª…</h1>
        <div class="box">
          <div class="text"><details>
            <summary>pragma solidity + ^ë²„ì „ì •ë³´</summary>
            <p>Pragmaë¥¼ í†µí•´ ì†”ë¦¬ë””í‹° ì»´íŒŒì¼ëŸ¬ ë²„ì „ì„ ì œí•œí•©ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>Contract</summary>
            <p>Contractë¥¼ í†µí•´ ì´ ì½”ë“œê°€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì†”ë¦¬ë””í‹°ì˜ ì»¨íŠ¸ë™íŠ¸ëŠ” ìë°”ì˜ í´ë˜ìŠ¤ë¡œ ë‚˜íƒ€ëƒˆìŠµë‹ˆë‹¤.<br>ì»¨íŠ¸ë™íŠ¸ëŠ” ìƒì†ê³¼ ë‹¤í˜•ì„±ì„ ì§€ì›í•˜ë¯€ë¡œ ë‹¤ë¥¸ ì»¨íŠ¸ë™íŠ¸ë¡œë¶€í„° ìƒì†ë˜ê±°ë‚˜ í•œ ì†”ë¦¬ë””í‹° íŒŒì¼ì— ì—¬ëŸ¬ ê°œì˜ ì»¨íŠ¸ë™íŠ¸ê°€ ì •ì˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>Struct</summary>
            <p>í•„ìš”í•œ ìë£Œí˜•ë“¤ì„ ê°€ì§€ê³  ìƒˆë¡­ê²Œ ì •ì˜í•˜ëŠ” ì‚¬ìš©ì ì •ì˜ íƒ€ì…ìœ¼ë¡œ ì†”ë¦¬ë””í‹°ì˜ êµ¬ì¡°ì²´ì…ë‹ˆë‹¤.<br>í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ êµ¬ì¡°ì²´ë¥¼ ëª…ì‹œí•˜ë©´ storageì— ì €ì¥ë˜ê³  í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ êµ¬ì¡°ì²´ë¥¼ ëª…ì‹œí•˜ë©´ memoryì— ì €ì¥ë©ë‹ˆë‹¤.<br>(ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´ storageëŠ” ì˜êµ¬ ì €ì¥, memoryëŠ” ì„ì‹œ ì €ì¥ì…ë‹ˆë‹¤. ìì„¸í•œ ê±´ ë°‘ì— ë”°ë¡œ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤.)</p>
        </details>
        <details>
            <summary>ê°’ íƒ€ì…</summary>
            <p>bool : ë…¼ë¦¬ìë£Œí˜• true/false.<br>
                int : ì •ìˆ˜í˜•<br>
                uint : ë¶€í˜¸ê°€ ì—†ëŠ” ì •ìˆ˜í˜• unsigned int. ì†”ë¦¬ë””í‹°ëŠ” ì£¼ë¡œ uint ì‚¬ìš©<br>
                address : í¬ê¸°ê°€ 20bytesì¸ ì´ë”ë¦¬ì›€ ì£¼ì†Œ ê°’ (0xbFv15646A0â€¦)<br>
                bytes : ë°”ì´íŠ¸. ë¬¸ìì—´ì €ì¥<br>
                enum : ì—´ê±°í˜•<br>
                Javaì™€ SolidityëŠ”  ê°’ íƒ€ì…ì„ ì ëŠ” ìˆœì„œì— ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆë‹¤.<br> 
                Java> public int a;<br>
                Solidity> uint public a;
            </p>
        </details>
        <details>
            <summary>ë§¤í•‘(mapping)</summary>
            <p>- êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•.<br>
                - Key&Valueë¥¼ ìŒìœ¼ë¡œ ì €ì¥<br>
                - mapping (Key(=address)=>Value(=uint))ì™€ ê°™ì€ í˜•íƒœë¡œ ì‚¬ìš©<br>
                Java> public HashMap&lt;address, Voter&gt;voters = new HashMap&lt;address, Voter&gt;;<br>
                Solidity> mapping(address => Voter) public voters;
            </p>
        </details>
        <details>
            <summary>ë°°ì—´</summary>
            <p>ê°™ì€ íƒ€ì…ì˜ ë³€ìˆ˜ë“¤ì„ ë¬¶ì€ ìë£Œêµ¬ì¡°</p>
        </details>
        <details>
            <summary>ìƒì„±ì(Constructor)</summary>
            <p>-ê°ì²´ì˜ ì´ˆê¸°í™”ê°€ í•„ìš”í•˜ë‹¤ë©´ ìƒì„±ì ì•ˆì— ì‘ì„±<br>
                -ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¨ 1ê°œë§Œ ì‘ì„±í•´ì•¼ í•œë‹¤. 2ê°œ ì´ìƒ ì‚¬ìš©ì‹œ ì˜¤ë¥˜ ë°œìƒ<br>
                -ìƒì„±ìë¥¼ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ìƒì„±ì(default constructor) ìë™ ìƒì„±<br>
                -ìƒì„±ìì˜ ê°€ì‹œì„±ì€ internal ë˜ëŠ” public<br>
                >ìƒì„±ìëŠ” íŠ¹ë³„í•œ í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ìë°” ì½”ë“œì—ì„  í•¨ìˆ˜ë¡œ ë‚˜íƒ€ë‚´ì—ˆë‹¤. Solidity ì½”ë“œë¡œ ì‘ì„±í•  ë•ŒëŠ” í•¨ìˆ˜ê°€ ì•„ë‹Œ constructorë¡œ ë°”ê¾¸ì–´ ì‘ì„±í•˜ì„¸ìš”.<br>
            </p>
        </details>
        <details>
            <summary>ë°ì´í„° ìœ„ì¹˜</summary>
            <p>memory<br>
                ì„ì‹œì ìœ¼ë¡œ ì €ì¥ë˜ëŠ” ë³€ìˆ˜ë¥¼ ë§í•©ë‹ˆë‹¤. ì´ëŠ” contract í•¨ìˆ˜ì— ëŒ€í•œ ì™¸ë¶€ í˜¸ì¶œë“¤ì´ ì¼ì–´ë‚˜ëŠ” ì‚¬ì´ì— ì§€ì›Œì§‘ë‹ˆë‹¤. ë§¤ê°œë³€ìˆ˜ì™€ ë¦¬í„´ê°’ì€ memoryë¡œ ì„ ì–¸í•©ë‹ˆë‹¤.<br><br>
                storage<br>
                ë¸”ë¡ì²´ì¸ì— ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥ë˜ëŠ” ë³€ìˆ˜ë¥¼ ë§í•©ë‹ˆë‹¤. ì €ì¥ë˜ëŠ” ë³€ìˆ˜ì˜ ì¢…ë¥˜ëŠ” ìƒíƒœ ë³€ìˆ˜, í•¨ìˆ˜ ë‚´ ë¡œì»¬ ë³€ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.
            </p>
        </details>
        <details>
            <summary>msg.sender</summary>
            <p>í˜„ì¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì‚¬ëŒ (í˜¹ì€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸)ì˜ ì£¼ì†Œì´ë©° ëª¨ë“  í•¨ìˆ˜ì—ì„œ ì´ìš© ê°€ëŠ¥í•œ ì „ì—­ ë³€ìˆ˜ì…ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>ë©”ì„¸ì§€ í”„ë¡œí¼í‹°(Message Properties)</summary>
            <p>ê³„ì•½ì€ msg í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•´ ê³„ì•½ì„ í˜¸ì¶œí•œ ì‚¬ëŒì´ ë³´ë‚¸ ë©”ì„¸ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. msg í”„ë¡œí¼í‹°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¥¼ ë‹´ìŠµë‹ˆë‹¤.<br>
                <table>
                    <tr>
                        <th>ì •ë³´</th>
                        <th>íƒ€ì…</th>
                        <th>ì„¤ëª…</th>
                    </tr>
                    <tr>
                        <td>data</td>
                        <td>byte</td>
                        <td>í˜¸ì¶œ ë°ì´í„°</td>
                    </tr>
                    <tr>
                        <td>sender</td>
                        <td>address</td>
                        <td>ê³„ì•½ì„ í˜¸ì¶œí•œ ì´ë”ë¦¬ì›€ ì£¼ì†Œ</td>
                    </tr>
                    <tr>
                        <td>value</td>
                        <td>uint</td>
                        <td>ê³„ì•½ ì£¼ì†Œë¡œ ë³´ë‚¸ EtherëŸ‰</td>
                    </tr>
                    <tr>
                        <td>gas</td>
                        <td>uint</td>
                        <td>gas limitì—ì„œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ë‚¨ì€ ê°€ìŠ¤</td>
                    </tr>
                </table>
                </p>
        </details>
        <details>
            <summary>Push</summary>
            <p>SolidityëŠ” pushë¥¼ ì´ìš©í•˜ì—¬ ë°°ì—´ì— ê°’ì„ ì…ë ¥ í•œë‹¤.<br>
                Java code><br> 
                proposals.name=proposalNames[i];<br>
                &nbsp;&nbsp;&nbsp;&nbsp;proposals.voteCount=0;<br>
                Solidity code><br>
                proposals.push(Proposal({<br>
                &nbsp;&nbsp;&nbsp;&nbsp;name: proposalNames[i],<br>
                &nbsp;&nbsp;&nbsp;&nbsp;voteCount: 0<br>
                })
                </p>
        </details>
        <details>
            <summary>ì ‘ê·¼ì œì–´ì(ê°€ì‹œì„±)</summary>
            <p>-external : ì™¸ë¶€ì»¨íŠ¸ë™íŠ¸ë§Œ ì ‘ê·¼ê°€ëŠ¥(ê°™ì€ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜¸ì¶œë˜ë©´ ì•ˆë¨), ìƒíƒœë³€ìˆ˜ëŠ” external ë¶ˆê°€ëŠ¥<br><br>
                -internal : ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€í˜¸ì¶œê°€ëŠ¥, ìƒì†ë°›ì€ ì»¨íŠ¸ë™íŠ¸ë„ í˜¸ì¶œê°€ëŠ¥, ìƒíƒœë³€ìˆ˜ëŠ” ë””í´íŠ¸ë¡œ internal ì„ ì–¸<br><br>
                -public : ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€í˜¸ì¶œ ê°€ëŠ¥, ìƒì†ë°›ì€ ì»¨íŠ¸ë™íŠ¸ë„ í˜¸ì¶œê°€ëŠ¥, ì™¸ë¶€ì»¨íŠ¸ë™íŠ¸ë„ í˜¸ì¶œê°€ëŠ¥<br><br>
                -private: ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€ë§Œ í˜¸ì¶œê°€ëŠ¥
                </p>
        </details>
        <details>
            <summary>í•¨ìˆ˜(function)</summary>
            <p>ê¸°ë³¸ì ìœ¼ë¡œ í•¨ìˆ˜ëŠ” public.<br>
                í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤. ìë°” í•¨ìˆ˜ì™€ëŠ” ìˆœì„œê°€ ì•½ê°„ ë‹¤ë¥´ë‹¤.<br>
                ì†”ë¦¬ë””í‹° ì½”ë“œ ex><br>
                fuction nameA(address a) public view returns(uint b) {<br>
                // í•¨ìˆ˜ ë‚´ìš©<br>
                }
                </p>
        </details>
        <details>
            <summary>returns</summary>
            <p>ì†”ë¦¬ë””í‹°ëŠ” ë°˜í™˜ê°’ì˜ íƒ€ì…ì„ ì§€ì •í•´ì¤˜ì•¼í•˜ë©° ë‹¤ì¤‘ ë°˜í™˜ê°’ ì²˜ë¦¬ëŠ” ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬ ëœë‹¤.</p>
        </details>
        <details>
            <summary>í•¨ìˆ˜ì œì–´ì(function modifier)</summary>
            <p>-View : ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ë§Œ ìˆìŠµë‹ˆë‹¤. ìƒíƒœ ë³€í™”ê°€ ì—†ëŠ” í•¨ìˆ˜ì—ëŠ” viewë¥¼ ë¶™ì…ë‹ˆë‹¤. ì¦‰, í•¨ìˆ˜ëŠ” ë°ì´í„°ë¥¼ ë³´ê¸°ë§Œí•˜ê³  ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.<br><br>
                -pure : ì–´ë–¤ ë°ì´í„°ë„ ì ‘ê·¼í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í•¨ìˆ˜ì— ì „ë‹¬ëœ ì¸ìê°’ì— ë”°ë¼ì„œ ë°˜í™˜ê°’ì´ ì •í•´ì§‘ë‹ˆë‹¤.
                </p>
        </details>
        <details>
            <summary>require</summary>
            <p>í•¨ìˆ˜ ì‹¤í–‰ ì „ì— ì°¸ì´ì–´ì•¼ í•˜ëŠ” íŠ¹ì • ì¡°ê±´ì„ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©í•©ë‹ˆë‹¤. íŠ¹ì • ì¡°ê±´ì´ ì°¸ì´ ì•„ë‹ ë•Œ í•¨ìˆ˜ê°€ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°œìƒí•˜ê³  ì‹¤í–‰ì„ ë©ˆì¶”ê²Œ ë©ë‹ˆë‹¤.<br>
                ìë°” ì½”ë“œ><br>
                if (msg.sender != chairperson) { <br>
                &nbsp;&nbsp;&nbsp;&nbsp;System.out.println("Only chairperson can give right to vote.");<br>
                &nbsp;&nbsp;&nbsp;&nbsp;System.exit(0); // ì‹¤í–‰ ë©ˆì¶”ëŠ” ì½”ë“œ<br>
                }<br>
                ì†”ë¦¬ë””í‹° ì½”ë“œ><br>
                require(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;msg.sender == chairperson,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"Only chairperson can give right to vote."<br>
                );
                </p>
        </details>
        <details>
            <summary>event</summary>
            <p>eventëŠ” Dappì˜ ë°ì´í„° ì¶œë ¥ ìˆ˜ë‹¨(Log)ì…ë‹ˆë‹¤. ì´ë²¤íŠ¸ë¥¼ ì„ ì–¸ í›„ ì´ ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•˜ë©´ ë§¤ê°œë³€ìˆ˜ê°’ê³¼ í•¨ê»˜ í˜¸ì¶œí•œ ê¸°ë¡ì´ Transaction Receipt ë¼ ë¶ˆë¦¬ëŠ” íŠ¸ëœì­ì…˜ ê²°ê³¼ì— ì €ì¥ë©ë‹ˆë‹¤.<br>
                (DAppì´ë€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ êµ¬í˜„í•œ ë¸”ë¡ì²´ì¸ì˜ íƒˆì¤‘ì•™í™” ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜)
                </p>
        </details>
        <details>
            <summary>_</summary>
            <p>í•¨ìˆ˜ ì¸ìëª… ì• ë˜ëŠ” private ì œí•œìê°€ ë¶™ì€ í•¨ìˆ˜ëª… ì•ì— _ë¥¼ ë¶™ì—¬ì•¼í•©ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>transfer</summary>
            <p>ê³„ì•½ì´ ë‹¤ë¥¸ ì´ì—ê²Œ Etherë¥¼ ì „ì†¡í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>send</summary>
            <p>sendëŠ” addressì˜ ë©¤ë²„ë³€ìˆ˜ë¡œ í•´ë‹¹ ì£¼ì†Œì—ê²Œë¡œ ì†¡ê¸ˆí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>í•¨ìˆ˜ì œì–´ì(modifier)</summary>
            <p>í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ìš”êµ¬ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ëŠ”ì§€ í™•ì¸í•˜ëŠ” ì‘ì—…ì„ í•´ì¤ë‹ˆë‹¤.<br>
                ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ìœ ì‚¬ í•¨ìˆ˜ì…ë‹ˆë‹¤. ë³´í†µ í•¨ìˆ˜ ì‹¤í–‰ ì „ì— ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
                í•¨ìˆ˜ ì¸ìëª… ì• ë˜ëŠ” private ì œí•œìê°€ ë¶™ì€ í•¨ìˆ˜ëª… ì•ì— _ë¥¼ ë¶™ì—¬ì•¼í•©ë‹ˆë‹¤.<br>
                ì„ ì–¸ê³¼ ì‚¬ìš©ì€ í•¨ìˆ˜ ì œì–´ì ë§ˆì§€ë§‰ì— _;ë¥¼ ë¶™ì—¬ ë‚˜ë¨¸ì§€ ë‚´ìš©ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.<br>
                </p>
        </details>
        <details>
            <summary>payable</summary>
            <p>payable í‚¤ì›Œë“œëŠ” ê³„ì•½ ê³„ì •ì— ì™¸ë¶€ì—ì„œ ì´ë”ë¥¼ ì†¡ê¸ˆ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì¦‰, ê³„ì•½ì´ Aì—ê²Œ ì†¡ê¸ˆì„ ë°›ìœ¼ë ¤ë©´ Aê°€ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ì— payable í‚¤ì›Œë“œê°€ ìˆì–´ì•¼í•©ë‹ˆë‹¤.<br>
                payable í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
                function í•¨ìˆ˜ì´ë¦„() payable public { <br>
                //í•¨ìˆ˜ ë‚´ìš©<br>
                }
                </p>
        </details>
        <details>
            <summary>enum</summary>
            <p>Enumì€ ì—´ê±°í˜•ìœ¼ë¡œ ì‚¬ìš©ì ì •ì˜ íƒ€ì…ì„ ë§Œë“œëŠ” í•œ ê°€ì§€ ë°©ë²•ì…ë‹ˆë‹¤. <br>
                - ì—´ê±°í˜•(indexë¥¼ ë¶€ì—¬í•œ ìë£Œí˜•)<br>
                - ê°’ì„ ì •ìˆ˜íƒ€ì…ìœ¼ë¡œ ë¦¬í„´
                </p>
        </details>
        <details>
            <summary>emit</summary>
            <p>emitì´ë€ í‚¤ì›Œë“œë¥¼ ì´ìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤</p>
        </details>
        <details>
            <summary>selfdestruct</summary>
            <p>ë°›ëŠ” ì‚¬ëŒ ì£¼ì†Œë¥¼ ëœ»í•˜ë©° í˜„ì¬ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‚­ì œí•˜ê³  ê³„ì •ì˜ ë‚˜ë¨¸ì§€ ì´ë”ë¥¼ ë°›ëŠ” ì‚¬ëŒ ì£¼ì†Œë¡œ ë³´ëƒ…ë‹ˆë‹¤.</p>
        </details>
        <details>
            <summary>ì–´ì…ˆë¸”ë¦¬(assembly)</summary>
            <p>low levelì—ì„œ EVMì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>
        </details>
        </div>
          
        </div>
      </div>
      <div class="item">
        <h1>ì†Œì•¡ ê²°ì œ ì±„ë„</h1>
        <div class="box">
          <div class="text" include-html="04.html">
            <pre>
ì´ ì„¹ì…˜ì—ì„œëŠ” ê²°ì œ ì±„ë„ì˜ ì˜ˆì œ êµ¬í˜„ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. ì•”í˜¸í™” ì„œëª…ì„ ì‚¬ìš©í•˜ì—¬ ë™ì¼í•œ ë‹¹ì‚¬ìê°„ì— ì•ˆì „í•˜ê³  ì¦‰ê°ì ì´ë©° ê±°ë˜ ìˆ˜ìˆ˜ë£Œì—†ì´ ì´ë”ë¥¼ ë°˜ë³µì ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. 
ì„œëª… ìƒì„± ë° í™•ì¸
Alice : ë³´ë‚¸ ì‚¬ëŒ Bob : ë°›ëŠ” ì‚¬ëŒ
AliceëŠ” ì•”í˜¸í™” ì„œëª…ì´ ëœ ë©”ì‹œì§€ ì˜¤í”„ì²´ì¸ì„ Bobì—ê²Œ ë³´ë‚´ê¸°ë§Œ í•˜ë©´ ëœë‹¤. (ìˆ˜í‘œ ì‘ì„±ê³¼ ë¹„ìŠ·í•˜ë‹¤.) 
Aliceì™€ Bobì€ ì„œëª…ì„ ì‚¬ìš©í•˜ì—¬ ê±°ë˜ë¥¼ ìŠ¹ì¸í•˜ë©°, ì´ëŠ” Ethereumì˜ ìŠ¤ë§ˆíŠ¸ ê³„ì•½ìœ¼ë¡œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
ê³„ì•½ì€ ë‹¤ìŒê³¼ ê°™ì´ ì‘ë™í•©ë‹ˆë‹¤.
1.	AliceëŠ” ReceiverPaysê³„ì•½ì„ ë°°í¬í•˜ê³  ì§€ë¶ˆí•  ì§€ë¶ˆì„ ì¶©ë‹¹í•˜ê¸°ì— ì¶©ë¶„í•œ ì´ë”ë¥¼ ì²¨ë¶€í•©ë‹ˆë‹¤.
2.	AliceëŠ” ê°œì¸ í‚¤ë¡œ ë©”ì‹œì§€ì— ì„œëª…í•˜ì—¬ ê²°ì œë¥¼ ìŠ¹ì¸í•©ë‹ˆë‹¤.
3.	AliceëŠ” ì•”í˜¸í™” ì„œëª…ëœ ë©”ì‹œì§€ë¥¼ Bobì—ê²Œ ë³´ëƒ…ë‹ˆë‹¤. ë©”ì‹œì§€ëŠ” ë¹„ë°€ë¡œ ìœ ì§€í•  í•„ìš”ê°€ ì—†ìœ¼ë©° (ë‚˜ì¤‘ì— ì„¤ëª…) ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë©”ì»¤ë‹ˆì¦˜ì€ ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
4.	Bobì€ ì„œëª…ëœ ë©”ì‹œì§€ë¥¼ ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì— ì œì‹œí•˜ì—¬ ì§€ë¶ˆì„ ì²­êµ¬í•˜ê³  ë©”ì‹œì§€ì˜ ì§„ìœ„ë¥¼ í™•ì¸í•œ ë‹¤ìŒ ìê¸ˆì„ í•´ì œí•©ë‹ˆë‹¤.
ì„œëª… í•  ë‚´ìš©
ì§€ë¶ˆì„ ì´í–‰í•˜ëŠ” ê³„ì•½ì˜ ê²½ìš° ì„œëª… ëœ ë©”ì‹œì§€ì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë˜ì–´ì•¼í•©ë‹ˆë‹¤.
1.	ë°›ëŠ” ì‚¬ëŒì˜ ì£¼ì†Œì…ë‹ˆë‹¤.
2.	ì´ì²´ í•  ê¸ˆì•¡ì…ë‹ˆë‹¤.
3.	ì¬ìƒ ê³µê²©ì— ëŒ€í•œ ë³´í˜¸.
ì¬ìƒ ê³µê²©ì€ ì„œëª…ëœ ë©”ì‹œì§€ë¥¼ ì¬ì‚¬ìš©í•˜ì—¬ ë‘ ë²ˆì§¸ ì‘ì—…ì— ëŒ€í•œ ê¶Œí•œì„ ìš”ì²­í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì€ ê³„ì •ì´ ë³´ë‚¸ íŠ¸ëœì­ì…˜ ìˆ˜ì¸ nonceê°€ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
ë˜ ë‹¤ë¥¸ ìœ í˜•ì˜ ì¬ìƒ ê³µê²©ì€ ì†Œìœ ìê°€ ReceiverPaysìŠ¤ë§ˆíŠ¸ ê³„ì•½ì„ ë°°í¬í•˜ê³  ì¼ë¶€ ì§€ë¶ˆì„ í•œ ë‹¤ìŒ ê³„ì•½ì„ íŒŒê¸° í•  ë•Œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ . ë‚˜ì¤‘ì— ê·¸ë“¤ì€ ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì„ ë‹¤ì‹œ ë°°í¬í•˜ê¸°ë¡œ ê²°ì •í–ˆì§€ë§Œ ìƒˆ ê³„ì•½ì€ ì´ì „ ë°°í¬ì—ì„œ ì‚¬ìš© ëœ nonceë¥¼ ì•Œì§€ ëª»í•˜ë¯€ë¡œ ê³µê²©ìëŠ” ì´ì „ ë©”ì‹œì§€ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
AliceëŠ” ë©”ì‹œì§€ì— ê³„ì•½ ì£¼ì†Œë¥¼ í¬í•¨í•˜ì—¬ ì´ ê³µê²©ìœ¼ë¡œë¶€í„° ë³´í˜¸í•  ìˆ˜ ìˆìœ¼ë©° ê³„ì•½ ì£¼ì†Œ ìì²´ê°€ í¬í•¨ ëœ ë©”ì‹œì§€ ë§Œ ìˆ˜ë½ë©ë‹ˆë‹¤. claimPayment() ì´ ì„¹ì…˜ì˜ ëì— ìˆëŠ” ì „ì²´ ê³„ì•½ ê¸°ëŠ¥ì˜ ì²˜ìŒ ë‘ ì¤„ì—ì„œ ì´ì— ëŒ€í•œ ì˜ˆë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ .

public class ReceiverPays {

    public static void main(String[] args) {
       address owner = msg.sender;
 
        HashMap &lt;uint256, bool> usedNonces = new HashMap&lt;uint256,bool>();
 
        public ReceiverPays() payable {}
 
        public claimPayment(uint256 amount, uint256 nonce, bytes memory signature) {
            if(!usedNonces[nonce]) System.exit(0);
            usedNonces[nonce] = true;
 
            bytes32 message = prefixed(keccak256(abi.encodePacked(msg.sender, amount, nonce, this)));
 
            if(recoverSinger(message,signatur)==owner) System.exit(0);
 
            msg.sender.transfer(amount);
        }
 
        public shutdown() {
            if(msg.sender==owner) System.out(0);
            selfdestruct(msg.sender);
        }
 
        private splitSignature(bytes memory sig) pure
        {
            if (sig.length != 65) System.exit(0); 
 
            assembly {                 //solidityì½”ë“œ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•¨
                r := mload(add(sig, 32))
                s := mload(add(sig, 64))
                v := byte(0, mload(add(sig, 96)))
            }
 
            return (v, r, s);
        }
 
        private recoverSigner(bytes32 message, bytes memory sig) pure
        {
            (uint8 v, bytes32 r, bytes32s s) = splitSignature(sig);
 
            return ecrecover(message, v, r, s); //javaì—ì„  1ê°œë§Œ ë¦¬í„´ ê°€ëŠ¥í•˜ë¯€ë¡œ ì†”ë¦¬ë””í‹° ì½”ë“œ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•¨.
        }
 
        private prefixed(bytes32 hash) pure {
            return keccak256(abi.encodePacked("\x19Ethereum Signed Message:\n32", hash));
        }
    }
 }
            </pre>
            </div>
        </div>
      </div>
      <div class="item">
        <h1>ì…ë ¥ì°½</h1>
        <div class="box">
          <div class="text">
            
                <pre>
// SPDX-License-Identifier: GPL-3.0
pragma solidity ^0.7.0;

contract ReceiverPays {
    address owner = msg.sender;

    mapping(uint256 => bool) usedNonces;

    constructor() payable {}

    function claimPayment(uint256 amount, uint256 nonce, bytes memory signature) public {
        require(!usedNonces[nonce]);
        usedNonces[nonce] = true;

        // this recreates the message that was signed on the client
        bytes32 message = prefixed(keccak256(abi.encodePacked(msg.sender, amount, nonce, this)));

        require(recoverSigner(message, signature) == owner);

        msg.sender.transfer(amount);
    }

    /// destroy the contract and reclaim the leftover funds.
    function shutdown() public {
    </pre>
    <form action="" id="my_form_6">
    <textarea id="code3" name="code" placeholder="ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
    <input type="submit" value="ì œì¶œí•˜ê¸°" id="_submit3" /><br />
    </form>
        <!--
        require(msg.sender == owner);
        selfdestruct(msg.sender);
        -->
    <pre>
    }

    /// signature methods.
    function splitSignature(bytes memory sig)
        internal
        pure
        returns (uint8 v, bytes32 r, bytes32 s)
    {
        require(sig.length == 65);

        assembly {
            // first 32 bytes, after the length prefix.
        </pre>
        <form action="" id="my_form_7">
        <textarea id="code4" name="code" placeholder="ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
    <input type="submit" value="ì œì¶œí•˜ê¸°" id="_submit4" /><br />
</form>
            <!--r := mload(add(sig, 32))-->
        <pre>
            // second 32 bytes.
            s := mload(add(sig, 64))
            // final byte (first byte of the next 32 bytes).
            v := byte(0, mload(add(sig, 96)))
        }

        return (v, r, s);
    }

    function recoverSigner(bytes32 message, bytes memory sig)
        internal
        pure
        returns (address)
    {
        (uint8 v, bytes32 r, bytes32 s) = splitSignature(sig);

        return ecrecover(message, v, r, s);
    }

    /// builds a prefixed hash to mimic the behavior of eth_sign.
    function prefixed(bytes32 hash) internal pure returns (bytes32) {
        return keccak256(abi.encodePacked("\x19Ethereum Signed Message:\n32", hash));
    }
}
                </pre>
              
            </form>
          </div>
        </div>
      </div>
    </div>
    <script src="./answer.js"></script>
  </body>
</html>
